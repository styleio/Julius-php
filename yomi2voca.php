<?php
/* ***************
ひらがな -> Julius 標準モデル用変換スクリプト
PHP関数版

[使い方]
include_once('yomi2voca.php');
$phone = julius::yomi2voca('こんにちは');
echo $phone;

本家はこちら
https://github.com/julius-speech/
***************** */
class julius{

    //yomi2voca.plのPHP関数版
    public static function yomi2voca($str) {
      $yv = array();
      //3文字以上からなる変換規則
      $yv['う゛ぁ'] = ' b a';
      $yv['う゛ぁ'] = ' b a';
      $yv['う゛ぃ'] = ' b i';
      $yv['う゛ぇ'] = ' b e';
      $yv['う゛ぉ'] = ' b o';
      $yv['う゛ゅ'] = ' by u';
      //2文字からなる変換規則
      $yv['ぅ゛'] = ' b u';
      $yv['あぁ'] = ' a a';
      $yv['いぃ'] = ' i i';
      $yv['いぇ'] = ' i e';
      $yv['いゃ'] = ' y a';
      $yv['うぅ'] = ' u:';
      $yv['えぇ'] = ' e e';
      $yv['おぉ'] = ' o:';
      $yv['かぁ'] = ' k a:';
      $yv['きぃ'] = ' k i:';
      $yv['くぅ'] = ' k u:';
      $yv['くゃ'] = ' ky a';
      $yv['くゅ'] = ' ky u';
      $yv['くょ'] = ' ky o';
      $yv['けぇ'] = ' k e:';
      $yv['こぉ'] = ' k o:';
      $yv['がぁ'] = ' g a:';
      $yv['ぎぃ'] = ' g i:';
      $yv['ぐぅ'] = ' g u:';
      $yv['ぐゃ'] = ' gy a';
      $yv['ぐゅ'] = ' gy u';
      $yv['ぐょ'] = ' gy o';
      $yv['げぇ'] = ' g e:';
      $yv['ごぉ'] = ' g o:';
      $yv['さぁ'] = ' s a:';
      $yv['しぃ'] = ' sh i:';
      $yv['すぅ'] = ' s u:';
      $yv['すゃ'] = ' sh a';
      $yv['すゅ'] = ' sh u';
      $yv['すょ'] = ' sh o';
      $yv['せぇ'] = ' s e:';
      $yv['そぉ'] = ' s o:';
      $yv['ざぁ'] = ' z a:';
      $yv['じぃ'] = ' j i:';
      $yv['ずぅ'] = ' z u:';
      $yv['ずゃ'] = ' zy a';
      $yv['ずゅ'] = ' zy u';
      $yv['ずょ'] = ' zy o';
      $yv['ぜぇ'] = ' z e:';
      $yv['ぞぉ'] = ' z o:';
      $yv['たぁ'] = ' t a:';
      $yv['ちぃ'] = ' ch i:';
      $yv['つぁ'] = ' ts a';
      $yv['つぃ'] = ' ts i';
      $yv['つぅ'] = ' ts u:';
      $yv['つゃ'] = ' ch a';
      $yv['つゅ'] = ' ch u';
      $yv['つょ'] = ' ch o';
      $yv['つぇ'] = ' ts e';
      $yv['つぉ'] = ' ts o';
      $yv['てぇ'] = ' t e:';
      $yv['とぉ'] = ' t o:';
      $yv['だぁ'] = ' d a:';
      $yv['ぢぃ'] = ' j i:';
      $yv['づぅ'] = ' d u:';
      $yv['づゃ'] = ' zy a';
      $yv['づゅ'] = ' zy u';
      $yv['づょ'] = ' zy o';
      $yv['でぇ'] = ' d e:';
      $yv['どぉ'] = ' d o:';
      $yv['なぁ'] = ' n a:';
      $yv['にぃ'] = ' n i:';
      $yv['ぬぅ'] = ' n u:';
      $yv['ぬゃ'] = ' ny a';
      $yv['ぬゅ'] = ' ny u';
      $yv['ぬょ'] = ' ny o';
      $yv['ねぇ'] = ' n e:';
      $yv['のぉ'] = ' n o:';
      $yv['はぁ'] = ' h a:';
      $yv['ひぃ'] = ' h i:';
      $yv['ふぅ'] = ' f u:';
      $yv['ふゃ'] = ' hy a';
      $yv['ふゅ'] = ' hy u';
      $yv['ふょ'] = ' hy o';
      $yv['へぇ'] = ' h e:';
      $yv['ほぉ'] = ' h o:';
      $yv['ばぁ'] = ' b a:';
      $yv['びぃ'] = ' b i:';
      $yv['ぶぅ'] = ' b u:';
      $yv['ふゃ'] = ' hy a';
      $yv['ぶゅ'] = ' by u';
      $yv['ふょ'] = ' hy o';
      $yv['べぇ'] = ' b e:';
      $yv['ぼぉ'] = ' b o:';
      $yv['ぱぁ'] = ' p a:';
      $yv['ぴぃ'] = ' p i:';
      $yv['ぷぅ'] = ' p u:';
      $yv['ぷゃ'] = ' py a';
      $yv['ぷゅ'] = ' py u';
      $yv['ぷょ'] = ' py o';
      $yv['ぺぇ'] = ' p e:';
      $yv['ぽぉ'] = ' p o:';
      $yv['まぁ'] = ' m a:';
      $yv['みぃ'] = ' m i:';
      $yv['むぅ'] = ' m u:';
      $yv['むゃ'] = ' my a';
      $yv['むゅ'] = ' my u';
      $yv['むょ'] = ' my o';
      $yv['めぇ'] = ' m e:';
      $yv['もぉ'] = ' m o:';
      $yv['やぁ'] = ' y a:';
      $yv['ゆぅ'] = ' y u:';
      $yv['ゆゃ'] = ' y a:';
      $yv['ゆゅ'] = ' y u:';
      $yv['ゆょ'] = ' y o:';
      $yv['よぉ'] = ' y o:';
      $yv['らぁ'] = ' r a:';
      $yv['りぃ'] = ' r i:';
      $yv['るぅ'] = ' r u:';
      $yv['るゃ'] = ' ry a';
      $yv['るゅ'] = ' ry u';
      $yv['るょ'] = ' ry o';
      $yv['れぇ'] = ' r e:';
      $yv['ろぉ'] = ' r o:';
      $yv['わぁ'] = ' w a:';
      $yv['をぉ'] = ' o:';
      $yv['う゛'] = ' b u';
      $yv['でぃ'] = ' d i';
      $yv['でぇ'] = ' d e:';
      $yv['でゃ'] = ' dy a';
      $yv['でゅ'] = ' dy u';
      $yv['でょ'] = ' dy o';
      $yv['てぃ'] = ' t i';
      $yv['てぇ'] = ' t e:';
      $yv['てゃ'] = ' ty a';
      $yv['てゅ'] = ' ty u';
      $yv['てょ'] = ' ty o';
      $yv['すぃ'] = ' s i';
      $yv['ずぁ'] = ' z u a';
      $yv['ずぃ'] = ' z i';
      $yv['ずぅ'] = ' z u';
      $yv['ずゃ'] = ' zy a';
      $yv['ずゅ'] = ' zy u';
      $yv['ずょ'] = ' zy o';
      $yv['ずぇ'] = ' z e';
      $yv['ずぉ'] = ' z o';
      $yv['きゃ'] = ' ky a';
      $yv['きゅ'] = ' ky u';
      $yv['きょ'] = ' ky o';
      $yv['しゃ'] = ' sh a';
      $yv['しゅ'] = ' sh u';
      $yv['しぇ'] = ' sh e';
      $yv['しょ'] = ' sh o';
      $yv['ちゃ'] = ' ch a';
      $yv['ちゅ'] = ' ch u';
      $yv['ちぇ'] = ' ch e';
      $yv['ちょ'] = ' ch o';
      $yv['とぅ'] = ' t u';
      $yv['とゃ'] = ' ty a';
      $yv['とゅ'] = ' ty u';
      $yv['とょ'] = ' ty o';
      $yv['どぁ'] = ' d o a';
      $yv['どぅ'] = ' d u';
      $yv['どゃ'] = ' dy a';
      $yv['どゅ'] = ' dy u';
      $yv['どょ'] = ' dy o';
      $yv['どぉ'] = ' d o:';
      $yv['にゃ'] = ' ny a';
      $yv['にゅ'] = ' ny u';
      $yv['にょ'] = ' ny o';
      $yv['ひゃ'] = ' hy a';
      $yv['ひゅ'] = ' hy u';
      $yv['ひょ'] = ' hy o';
      $yv['みゃ'] = ' my a';
      $yv['みゅ'] = ' my u';
      $yv['みょ'] = ' my o';
      $yv['りゃ'] = ' ry a';
      $yv['りゅ'] = ' ry u';
      $yv['りょ'] = ' ry o';
      $yv['ぎゃ'] = ' gy a';
      $yv['ぎゅ'] = ' gy u';
      $yv['ぎょ'] = ' gy o';
      $yv['ぢぇ'] = ' j e';
      $yv['ぢゃ'] = ' j a';
      $yv['ぢゅ'] = ' j u';
      $yv['ぢょ'] = ' j o';
      $yv['じぇ'] = ' j e';
      $yv['じゃ'] = ' j a';
      $yv['じゅ'] = ' j u';
      $yv['じょ'] = ' j o';
      $yv['びゃ'] = ' by a';
      $yv['びゅ'] = ' by u';
      $yv['びょ'] = ' by o';
      $yv['ぴゃ'] = ' py a';
      $yv['ぴゅ'] = ' py u';
      $yv['ぴょ'] = ' py o';
      $yv['うぁ'] = ' u a';
      $yv['うぃ'] = ' w i';
      $yv['うぇ'] = ' w e';
      $yv['うぉ'] = ' w o';
      $yv['ふぁ'] = ' f a';
      $yv['ふぃ'] = ' f i';
      $yv['ふぅ'] = ' f u';
      $yv['ふゃ'] = ' hy a';
      $yv['ふゅ'] = ' hy u';
      $yv['ふょ'] = ' hy o';
      $yv['ふぇ'] = ' f e';
      $yv['ふぉ'] = ' f o';
      //1文字からなる変換規則
      $yv['あ'] = ' a';
      $yv['い'] = ' i';
      $yv['う'] = ' u';
      $yv['え'] = ' e';
      $yv['お'] = ' o';
      $yv['か'] = ' k a';
      $yv['き'] = ' k i';
      $yv['く'] = ' k u';
      $yv['け'] = ' k e';
      $yv['こ'] = ' k o';
      $yv['さ'] = ' s a';
      $yv['し'] = ' sh i';
      $yv['す'] = ' s u';
      $yv['せ'] = ' s e';
      $yv['そ'] = ' s o';
      $yv['た'] = ' t a';
      $yv['ち'] = ' ch i';
      $yv['つ'] = ' ts u';
      $yv['て'] = ' t e';
      $yv['と'] = ' t o';
      $yv['な'] = ' n a';
      $yv['に'] = ' n i';
      $yv['ぬ'] = ' n u';
      $yv['ね'] = ' n e';
      $yv['の'] = ' n o';
      $yv['は'] = ' h a';
      $yv['ひ'] = ' h i';
      $yv['ふ'] = ' f u';
      $yv['へ'] = ' h e';
      $yv['ほ'] = ' h o';
      $yv['ま'] = ' m a';
      $yv['み'] = ' m i';
      $yv['む'] = ' m u';
      $yv['め'] = ' m e';
      $yv['も'] = ' m o';
      $yv['ら'] = ' r a';
      $yv['り'] = ' r i';
      $yv['る'] = ' r u';
      $yv['れ'] = ' r e';
      $yv['ろ'] = ' r o';
      $yv['が'] = ' g a';
      $yv['ぎ'] = ' g i';
      $yv['ぐ'] = ' g u';
      $yv['げ'] = ' g e';
      $yv['ご'] = ' g o';
      $yv['ざ'] = ' z a';
      $yv['じ'] = ' j i';
      $yv['ず'] = ' z u';
      $yv['ぜ'] = ' z e';
      $yv['ぞ'] = ' z o';
      $yv['だ'] = ' d a';
      $yv['ぢ'] = ' j i';
      $yv['づ'] = ' z u';
      $yv['で'] = ' d e';
      $yv['ど'] = ' d o';
      $yv['ば'] = ' b a';
      $yv['び'] = ' b i';
      $yv['ぶ'] = ' b u';
      $yv['べ'] = ' b e';
      $yv['ぼ'] = ' b o';
      $yv['ぱ'] = ' p a';
      $yv['ぴ'] = ' p i';
      $yv['ぷ'] = ' p u';
      $yv['ぺ'] = ' p e';
      $yv['ぽ'] = ' p o';
      $yv['や'] = ' y a';
      $yv['ゆ'] = ' y u';
      $yv['よ'] = ' y o';
      $yv['わ'] = ' w a';
      $yv['ゐ'] = ' i';
      $yv['ゑ'] = ' e';
      $yv['ん'] = ' N';
      $yv['っ'] = ' q';
      $yv['ー'] = ':';
      //未処理の捨て仮名をかなとしてあつかう
      $yv['ぁ'] = ' a';
      $yv['ぃ'] = ' i';
      $yv['ぅ'] = ' u';
      $yv['ぇ'] = ' e';
      $yv['ぉ'] = ' o';
      $yv['ゎ'] = ' w a';
      $yv['ぉ'] = ' o';
      //その他「を」
      $yv['を'] = ' o';
      foreach($yv as $v => $y){
        $str = str_replace($v,$y,$str);
      }
      $str = preg_replace('/[:]{2,}/su',':',$str);
      $str = trim($str);
      return $str;
    }
}
?>
